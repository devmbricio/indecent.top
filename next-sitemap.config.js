const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

const keywords =[
  { "value": "Acompanhantes" },
  { "value": "Garotas de Programa" },
  { "value": "Prostitutas" },
  { "value": "Escorts" },
  { "value": "Putas" },
  { "value": "Job" },
  { "value": "Acompanhantes-Job" },
  { "value": "modelos-Job" },
  { "value": "Profissionais-do-job" },
  { "value": "Profissionais-do-Sexo" },
  { "value": "Trabalhadoras-do- Sexo" },
  { "value": "Sex-Workers" },
  { "value": "Atrizes-Adultas" },
  { "value": "Modelos-Er√≥ticas" },
  { "value": "Massagistas-Sensuais" },
  { "value": "Massagem-Er√≥tica" },
  { "value": "Encontros-Casuais" },
  { "value": "Sexo-Casual" },
  { "value": "Programas" },
  { "value": "Servi√ßos-Sexuais" },
  { "value": "Acompanhantes-de-Luxo" },
  { "value": "Escorts-de-Luxo" },
  { "value": "Garotas-de-Programa-VIP" },
  { "value": "fatalmodel-Job" },
  { "value": "onlyfans-Job" },
  { "value": "Prostitutas-VIP" },
  { "value": "Acompanhantes-Independentes" },
  { "value": "Escorts Independentes" },
  { "value": "Garotas de Programa Independentes" },
  { "value": "Prostitutas Independentes" },
  { "value": "Onde-encontrar-acompanhantes" },
  { "value": "Onde-encontrar-garotas-de-programa" },
  { "value": "Onde-encontrar-prostitutas" },
  { "value": "Onde-encontrar-escorts" },
  { "value": "Telefones-de-acompanhantes" },
  { "value": "Contatos-de-garotas-de-programa" },
  { "value": "WhatsApp-acompanhantes" },
  { "value": "WhatsApp-garotas-de-programa" },
  { "value": "Fotos-de-acompanhantes" },
  { "value": "Fotos-de-garotas-de-programa" },
  { "value": "V√≠deos-de-acompanhantes" },
  { "value": "V√≠deos-de-garotas-de-programa" },
  { "value": "Pre√ßos-de-acompanhantes" },
  { "value": "Valores-de-programas" },
  { "value": "Tarifas-de-acompanhantes" },
  { "value": "An√∫ncios-de-acompanhantes" },
  { "value": "Classificados-de-acompanhantes" },
  { "value": "Acompanhantes-xvideos" },
  { "value": "Acompanhantes-olyfans" },
  { "value": "Acompanhantes-fatalmodel" },
  { "value": "Sites-de-acompanhantes" },
  { "value": "Ag√™ncias-de-acompanhantes" },
  { "value": "Book-de-acompanhantes" },
  { "value": "Perfis-de-acompanhantes" },
  { "value": "Mulheres-de-programa" },
  { "value": "Homens-de-programa" },
  { "value": "Swing" },
  { "value": "Travestis" },
  { "value": "Transsexuais" },
  { "value": "Shemales" },
  { "value": "Gays" },
  { "value": "L√©sbicas" },
  { "value": "Bissexuais" },
  { "value": "Servi√ßos-para-casais" },
  { "value": "Fetiches" },
  { "value": "BDSM" },
  { "value": "Domina√ß√£o" },
  { "value": "Submiss√£o" },
  { "value": "Roleplay" },
  { "value": "Striptease" },
  { "value": "Lap dance" },
  { "value": "Nuru-massage" },
  { "value": "Happy-ending-massage" },
  { "value": "Acompanhantes-24-horas" },
  { "value": "Programas-noturnos" },
  { "value": "Encontros-discretos" },
  { "value": "Sigilo-absoluto" },
  { "value": "Hot-girls" },
  { "value": "Sexy-escorts" },
  { "value": "Beautiful-companions" },
  { "value": "Call-girls" },
  { "value": "Hookers" },
  { "value": "Adult-entertainment" },
  { "value": "Erotic-services" },
  { "value": "Sexual-encounters" },
  { "value": "Online-dating" },
  { "value": "Adult-dating" },
  { "value": "Sex-dating" },
  { "value": "Local-escorts" },
  { "value": "Nearby-prostitutes" },
  { "value": "Find-escorts" },
  { "value": "Look-for-prostitutes" },
  { "value": "Directory-of-escorts" },
  { "value": "List-of-prostitutes" },
  { "value": "Reviews-of-escorts" },
  { "value": "Testimonials-of-prostitutes" },
  { "value": "Safety-tips-for-escorts" },
  { "value": "Guide-to-hiring-prostitutes" },
  { "value": "Legalidade-da-prostitui√ß√£o" },
  { "value": "Direitos-das-profissionais-do-sexo" },
  { "value": "Sa√∫de-sexual" },
  { "value": "Preven√ß√£o-de-DSTs" },
  { "value": "Camisinha" },
  { "value": "Sexo-seguro" },
  { "value": "Bem-estar-sexual" }
];

// üîß Fun√ß√£o para gerar slug URL-friendly
const slugify = (str) => {
  return str
    .normalize("NFD")                   // separa acentos das letras
    .replace(/[\u0300-\u036f]/g, "")   // remove acentos
    .toLowerCase()
    .replace(/\s+/g, '-')              // substitui espa√ßos por h√≠fen
    .replace(/[^a-z0-9-]/g, '')        // remove tudo que n√£o √© letra, n√∫mero ou h√≠fen
    .replace(/--+/g, '-')              // evita m√∫ltiplos h√≠fens seguidos
    .replace(/^-+|-+$/g, '');          // remove h√≠fens no in√≠cio/fim
};

const config = {
  siteUrl: 'https://www.indecent.top',
  generateRobotsTxt: true,
  sitemapSize: 5000,
  outDir: './public',
  changefreq: 'daily',
  priority: 0.7,

  exclude: [
    '/api/*',
    '/login',
    '/signup',
    '/redirect',
    '/robots',
    '/sitemap',
  ],

  transform: async (config, path) => ({
    loc: path,
    changefreq: config.changefreq,
    priority: config.priority,
    lastmod: new Date().toISOString(),
  }),

  additionalPaths: async (config) => {
    try {
      const [users, countries] = await Promise.all([
        prisma.user.findMany({
          select: { username: true },
          where: { username: { not: null } },
        }),
        prisma.country.findMany({
          include: {
            cities: true,
          },
        }),
      ]);

      console.log(`[SITEMAP] Usu√°rios encontrados: ${users.length}`);
      console.log(`[SITEMAP] Pa√≠ses carregados: ${countries.length}`);

      // üîπ URLs de perfil de usu√°rio
      const userProfilePaths = await Promise.all(
        users
          .filter(user => user.username)
          .map(user => config.transform(config, `/perfil/${user.username}`))
      );

      // üîπ URLs /acompanhantes/{pais}/{cidade} para cada keyword
// üîπ URLs /{keyword}/{pais}/{cidade}
const keywordPaths = [];

for (const kw of keywords) {
  const keywordSlug = slugify(kw.value); // ‚Üê transforma a keyword em slug
  for (const country of countries) {
    for (const city of country.cities) {
      const slugCountry = slugify(country.slug || country.name);
      const slugCity = slugify(city.slug || city.name);
      const path = `/${keywordSlug}/${slugCity}/${slugCountry}`; // ‚Üê aqui usamos o slug da keyword
      keywordPaths.push(await config.transform(config, path));
    }
  }
}


      console.log(`[SITEMAP] URLs geradas para keywords: ${keywordPaths.length}`);

      // üîπ P√°ginas fixas
      const fixedPaths = await Promise.all([
        config.transform(config, '/'),
        config.transform(config, '/compras'),
      ]);

      return [...fixedPaths, ...userProfilePaths, ...keywordPaths];
    } catch (error) {
      console.error("‚ùå Erro ao gerar paths do sitemap:", error);
      return [];
    } finally {
      await prisma.$disconnect();
    }
  },
};

module.exports = config;


/*
 
 /** @type {import('next-sitemap').IConfig} *
 
 const { PrismaClient } = require('@prisma/client');
// Inicializa o Prisma
const prisma = new PrismaClient();

 const keywords = [
"S√£o-Paulo",
"Rio-de-Janeiro",
"Bras√≠lia",
"Fortaleza",
"Salvador",
"Belo-Horizonte",
"Manaus",
"Curitiba",
"Recife",
"Goi√¢nia",
"Porto-Alegre",
"Bel√©m",
"Guarulhos",
"Campinas",
"S√£o-Lu√≠s",
"Macei√≥	",
"Campo-Grande",
"S√£o-Gon√ßalo",
"Teresina",
"Jo√£o-Pessoa",
"S√£o-Bernardo-do-Campo	",
"Duque-de-Caxias",
"Nova-Igua√ßu",
"Natal",
"Santo-Andr√©",
"Osasco",
"Sorocaba",
"Uberl√¢ndia",
"Ribeir√£o-Preto",
"S√£o-Jos√©-dos-Campos-",
"Cuiab√°",
"Jaboat√£o-dos-Guararapes",
"Contagem",
"Joinville",
"Feira-de-Santana",
"Aracaju",
"Londrina",
"Juiz-de-Fora",
"Florian√≥polis",
"Aparecida-de-Goi√¢nia",
"Serra",
"Campos-dos-Goytacazes",
"Belford-Roxo",
"Niter√≥i",
"S√£o-Jos√©-do-Rio-Preto",
"Ananindeua",
"Vila-Velh	",
"Caxias-do-Sul",
"Porto-Velho",
"Mogi-das-Cruzes",
"Jundia√≠",
"Macap√°",
"S√£o-Jo√£o-de-Meriti",
"Piracicaba",
"Campina-Grande",
"Santos",
"Mau√°",
"Montes-Claros",
"Boa-Vista",
"Betim",
"Maring√°",
"An√°polis",
"Diadema",
"Carapicu√≠ba",
"Petrolina",
"Bauru",
"Caruaru",
"Vit√≥ria-da-Conquista",
"Itaquaquecetuba",
"Rio-Branco",
"Blumenau",
"Ponta-Grossa",
"Caucaia",
"Cariacica",
"Franca",
"Olinda",
"Praia-Grande",
"Cascavel",
"Canoas",
"Paulista",
"Uberaba",
"Santar√©m",
"S√£o-Vicente",
"Ribeir√£o-das-Neves",
"S√£o-Jos√©-dos-Pinhais",
"Pelotas",
"Vit√≥ria",
"Barueri",
"Taubat√©",
"Suzano",
"Palmas",
"ama√ßari",
"V√°rzea-Grande",
"Limeira",
"Guaruj√°",
"Juazeiro-do-Norte-",
"Foz-do-Igua√ßu",
"Sumar√©",
"Petr√≥polis",
"Cotia",
"Tabo√£o-da-Serra	",
"Imperatriz	",
"Santa Maria	",
"S√£o Jos√©	",
"Parauapebas	",
"Marab√°	",
"Gravata√≠	",
"Mossor√≥	",
"Itaja√≠	",
"Volta Redonda	",
"Governador Valadares	",
"Indaiatuba	",
"S√£o Carlos	",
"Chapec√≥	",
"Parnamirim	",
"Embu das Artes	",
"Maca√©	",
"Rondon√≥polis	",
"S√£o Jos√© de Ribamar	",
"Dourados	",
"Araraquara	",
"Jacare√≠	",
"Juazeiro	",
"Mar√≠lia	",
"Americana	",
"Hortol√¢ndia	",
"Arapiraca	",
"Maracana√∫	",
"Itapevi	",
"Colombo	",
"Divin√≥polis	",
"Mag√©	",
"Ipatinga	",
"Novo Hamburgo	",
"Sete Lagoas	",
"Rio Verde	",
"√Åguas Lindas de Goi√°s	",
"Presidente Prudente	",
"Itabora√≠	",
"Viam√£o	",
"Palho√ßa	",
"Cabo Frio	",
"Santa Luzia	",
"S√£o Leopoldo	",
"Crici√∫ma	",
"Luzi√¢nia	",
"Passo Fundo	",
"Cabo de Santo Agostinho	",
"Lauro de Freitas	",
"Sobral	",
"Rio Claro	",
"Ara√ßatuba	",
"Valpara√≠so de Goi√°s	",
"Maric√°	",
"Sinop	",
"Nossa Senhora do Socorro	",
"Castanhal	",
"Rio Grande	",
"Nova Friburgo	",
"Alvorada	",
"Itabuna	",
"Cachoeiro de Itapemirim	",
"Santa B√°rbara d'Oeste	",
"Jaragu√° do Sul	",
"Guarapuava	",
"	Ferraz de Vasconcelos	",
"	Ilh√©us	",
"	Bragan√ßa Paulista	",
"	Timon	",
"	Aragua√≠na	",
"	Ibirit√©	",
"	Barra Mansa	",
"	Porto Seguro	",
"	Itu	",
"	Angra dos Reis	",
"	Mesquita	",
"	Linhares	",
"	S√£o Caetano do Sul	",
"	Pindamonhangaba	",
"	Francisco Morato	",
"	Teres√≥polis	",
"	Lages	",
"	Po√ßos de Caldas	",
"	Parna√≠ba	",
"	Barreiras	",
"	Patos de Minas	",
"	Jequi√©	",
"	Atibaia	",
"	Itapecerica da Serra	",
"	Abaetetuba	",
"	Itapetininga	",
"	Caxias	",
"	Rio das Ostras	",
"	Senador Canedo	",
"	Santana de Parna√≠ba	",
"	Mogi Gua√ßu	",
"	Pouso Alegre	",
"	Arauc√°ria	",
"	Alagoinhas	",
"	Toledo	",
"	Santa Rita	",
"	Fazenda Rio Grande	",
"	Camaragibe	",
"	Nil√≥polis	",
"	Paranagu√°	",
"	Pa√ßo do Lumiar	",
"	Teixeira de Freitas	",
"	Botucatu	",
"	Franco da Rocha	",
"	Garanhuns	",
"	Trindade	",
"	Brusque	",
"	Queimados	",
"	Balne√°rio Cambori√∫	",
"	Te√≥filo Otoni	",
"	Varginha	",
"	Campo Largo	",
"	Cachoeirinha	",
"	Caraguatatuba	",
"	Salto	",
"	Camet√°	",
"	Vit√≥ria de Santo Ant√£o	",
"	Ja√∫	",
"	Santa Cruz do Sul	",
"	Tr√™s Lagoas	",
"	Sapucaia do Sul	",
"	Conselheiro Lafaiete	",
"	Itapipoca	",
"	Crato	",
"	Araras	",
"	Apucarana	",
"	Araruama	",
"	Resende	",
"	Sabar√°	",
"	Vespasiano	",
"	Votorantim	",
"	Pinhais	",
"	Sert√£ozinho	",
"	Barcarena	",
"	Valinhos	",
"	Altamira	",
"	Barbacena	",
"	Guarapari	",
"	Ji-Paran√°	",
"	Tatu√≠	",
"	S√£o Mateus	",
"	Itaituba	",
"	Bento Gon√ßalves	",
"	Bragan√ßa	",
"	Barretos	",
"	Itatiba	",
"	Colatina	",
"	Almirante Tamandar√©	",
"	Arapongas	",
"	Birigui	",
"	Piraquara	",
"	Sarandi	",
"	Jandira	",
"	Guaratinguet√°	",
"	Bag√©	",
"	Araguari	",
"	Uruguaiana	",
"	Umuarama	",
"	Itagua√≠	",
"	Formosa	",
"	S√£o Gon√ßalo do Amarante	",
"	Catanduva	",
"	V√°rzea Paulista	",
"	Ribeir√£o Pires	",
"	Igarassu	",
"	Sim√µes Filho	",
"	Catal√£o	",
"	Cod√≥	",
"	Eun√°polis	",
"	Itabira	",
"	Paulo Afonso	",
"	Itanha√©m	",
"	Cubat√£o	",
"	Passos	",
"	Marituba	",
"	Nova Lima	",
"	Arax√°	",
"	S√£o Louren√ßo da Mata	",
"	Sorriso	",
"	Paul√≠nia	",
"	Tubar√£o	",
"	Itumbiara	",
"	Lu√≠s Eduardo Magalh√£es	",
"	Santana	",
"	Camb√©	",
"	Breves	",
"	A√ßail√¢ndia	",
"	Tangar√° da Serra	",
"	Jata√≠	",
"	Erechim	",
"	Nova Serrana	",
"	Paragominas	",
"	Maranguape	",
"	Planaltina	",
"	Lavras	",
"	Coronel Fabriciano	",
"	Muria√©	",
"	S√£o Pedro da Aldeia	",
"	Ourinhos	",
"	Novo Gama	",
"	Po√°	",
"	Bacabal	",
"	Itacoatiara	",
"	Itabaiana	",
"	Ub√°	",
"	Patos	",
"	Cambori√∫	",
"	Santo Ant√¥nio de Jesus	",
"	Ituiutaba	",
"	Manacapuru	",
"	Balsas	",
"	Lagarto	",
"	Assis	",
"	Itaperuna	",
"	Campo Mour√£o	",
"	Ipojuca	",
"	Caldas Novas	",
"	Abreu e Lima	",
"	Santa Cruz do Capibaribe	",
"	Leme	",
"	Iguatu	",
"	Ita√∫na	",
"	Par√° de Minas	",
"	Ariquemes	",
"	Francisco Beltr√£o	",
"	Votuporanga	",
"	Parintins	",
"	Japeri	",
"	Corumb√°	",
"	Ca√ßapava	",
"	Vilhena	",
"	S√£o Crist√≥v√£o	",
"	Caieiras	",
"	Aracruz	",
"	Paracatu	",
"	Rio Largo	",
"	Mairipor√£	",
"	Lajeado	",
"	Itajub√°	",
"	Ubatuba	",
"	Gua√≠ba	",
"	Barra do Pira√≠	",
"	Avar√©	",
"	Cajamar	",
"	Mogi Mirim	",
"	S√£o Jo√£o da Boa Vista	",
"	Serra Talhada	",
"	Ponta Por√£	",
"	Paranava√≠	",
"	Cruzeiro do Sul	",
"	Manhua√ßu	",
"	Pato Branco	",
"	Cidade Ocidental	",
"	Tucuru√≠	",
"	S√£o Jo√£o del-Rei	",
"	Patroc√≠nio	",
"	Itapeva	",
"	C√°ceres	",
"	Saquarema	",
"	Guanambi	",
"	Caratinga	",
"	Cacoal	",
"	Aruj√°	",
"	Una√≠	",
"	Gravat√°	",
"	Navegantes	",
"	Valen√ßa	",
"	Esmeraldas	",
"	Reden√ß√£o	",
"	Primavera do Leste	",
"	Gurupi	",
"	Araripina	",
"	Santa In√™s	",
"	Lorena	",
"	Iju√≠	",
"	Pinheiro	",
"	Barra do Corda	",
"	Santana do Livramento	",
"	Quixad√°	",
"	Moju	",
"	Lucas do Rio Verde	",
"	S√£o Bento do Sul	",
"	Picos	",
"	Bayeux	",
"	Jacobina	",
"	Maca√≠ba	",
"	Quixeramobim	",
"	Conc√≥rdia	",
"	S√£o Sebasti√£o	",
"	Tim√≥teo	",
"	Pacatuba	",
"	Tiangu√°	",
"	Chapadinha	",
"	Goiana	",
"	Curvelo	",
"	Aquiraz	",
"	Serop√©dica	",
"	Serrinha	",
"	Jo√£o Monlevade	",
"	Cachoeira do Sul	",
"	Cianorte	",
"	Belo Jardim	",
"	S√£o Roque	",
"	Carpina	",
"	Cear√°-Mirim	",
"	Mat√£o	",
"	Alfenas	",
"	Tr√™s Rios	",
"	Arcoverde	",
"	Campo Limpo Paulista	",
"	Cana√£ dos Caraj√°s	",
"	Santa Rosa	",
"	Santo √Çngelo	",
"	Bigua√ßu	",
"	Vinhedo	",
"	Vi√ßosa	",
"	Crate√∫s	",
"	Bebedouro	",
"	Esteio	",
"	Itapema	",
"	Sapiranga	",
"	Ibi√∫na	",
"	Tr√™s Cora√ß√µes	",
"	Lagoa Santa	",
"	Aracati	",
"	Tel√™maco Borba	",
"	Barbalha	",
"	Cruzeiro	",
"	Ouro Preto	",
"	Lins	",
"	Horizonte	",
"	Senhor do Bonfim	",
"	Irec√™	",
"	Canind√©	",
"	Eus√©bio	",
"	Graja√∫	",
"	Ca√ßador	",
"	Goian√©sia	",
"	Tef√©	",
"	Pirassununga	",
"	Viana	",
"	Castro	",
"	Santa Izabel do Par√°	",
"	Russas	",
"	Cascavel	",
"	Rio do Sul	",
"	Gaspar	",
"	Tail√¢ndia	",
"	Alegrete	",
"	Candeias	",
"	Santo Ant√¥nio do Descoberto	",
"	Casa Nova	",
"	Itapira	",
"	Ararangu√°	",
"	Goianira	",
"	Jaboticabal	",
"	S√£o Sebasti√£o do Para√≠so	",
"	Rol√¢ndia	",
"	Palmeira dos √çndios	",
"	Indaial	",
"	Dias d'√Åvila	",
"	Campo Formoso	",
"	Fernand√≥polis	",
"	Pacajus	",
"	Jana√∫ba	",
"	Itupeva	",
"	Coari	",
"	Brumado	",
"	Capanema	",
"	Farroupilha	",
"	Mineiros	",
"	Alenquer	",
"	Barra do Gar√ßas	",
"	Ven√¢ncio Aires	",
"	Peru√≠be	",
"	Oriximin√°	",
"	Formiga	",
"	Valen√ßa	",
"	Amparo	",
"	Concei√ß√£o do Coit√©	",
"	Mococa	",
"	Tom√©-A√ßu	",
"	Sousa	",
"	Embu-Gua√ßu	",
"	Tabatinga	",
"	Cabedelo	",
"	Len√ß√≥is Paulista	",
"	Cataguases	",
"	Itapetinga	",
"	Barreirinhas	",
"	Bom Jesus da Lapa	",
"	Piripiri	",
"	S√£o F√©lix do Xingu	",
"	Acara√∫	",
"	Ouricuri	",
"	Janu√°ria	",
"	Est√¢ncia	",
"	Itaberaba	",
"	Igarap√©-Miri	",
"	Monte Mor	",
"	Itaitinga	",
"	Porto Nacional	",
"	Montenegro	",
"	Vacaria	",
"	Bertioga	",
"	Surubim	",
"	Tup√£	",
"	Cap√£o da Canoa	",
"	Benevides	",
"	Mirassol	",
"	Cajazeiras	",
"	Campo Bom	",
"	Pesqueira	",
"	Ic√≥	",
"	Pedro Leopoldo	",
"	Portel	",
"	Salgueiro	",
"	Cristalina	",
"	Camocim	",
"	Camaqu√£	",
"	Floriano	",
"	Nova Odessa	",
"	Mongagu√°	",
"	Carazinho	",
"	Bezerros	",
"	Pen√°polis	",
"	Extremoz	",
"	Euclides da Cunha	",
"	Morada Nova	",
"	Mariana	",
"	Tau√°	",
"	Mau√©s	",
"	Iranduba	",
"	Caic√≥	",
"	Boituva	",
"	Novo Repartimento	",
"	Itapecuru-Mirim	",
"	Marechal Deodoro	",
"	Cruz das Almas	",
"	Ibitinga	",
"	Monte Alegre	",
"	Registro	",
"	Escada	",
"	Andradina	",
"	Cosm√≥polis	",
"	Vi√ßosa do Cear√°	",
"	S√£o Borja	",
"	Itamaraju	",
"	Coroat√°	",
"	Limoeiro do Norte	",
"	Jaguari√∫na	",
"	Uni√£o dos Palmares	",
"	Irati	",
"	I√ßara	",
"	Acar√°	",
"	Cruz Alta	",
"	Viseu	",
"	Penedo	",
"	Alta Floresta	",
"	Frutal	",
"	S√£o Gabriel	",
"	Dom Eliseu	",
"	Trairi	",
"	Batatais	",
"	Ponte Nova	",
"	Santa Luzia	",
"	Guarabira	",
"	Humait√°	",
"	Cachoeiras de Macacu	",
"	Ipir√°	",
"	Paudalho	",
"	Limoeiro	",
"	Capit√£o Po√ßo	",
"	Porto Feliz	",
"	Assu	",
"	Rolim de Moura	",
"	Rio Bonito	",
"	Santo Amaro	",
"	Nova Mutum	",
"	Marechal C√¢ndido Rondon	",
"	Pirapora	",
"	Buriticupu	",
"	Videira	",
"	Moreno	",
"	Mafra	",
"	Tr√™s Pontas	",
"	Ol√≠mpia	",
"	Uni√£o da Vit√≥ria	",
"	Canoinhas	",
"	Palmares	",
"	Tramanda√≠	",
"	Medianeira	",
"	S√£o Gon√ßalo do Amarante	",
"	Ribeira do Pombal	",
"	Manicor√©	",
"	Extrema	",
"	Itabirito	",
"	Tut√≥ia	",
"	Granja	",
"	Taquara	",
"	Santa Isabel	",
"	Rondon do Par√°	",
"	Beberibe	",
"	Piedade	",
"	S√£o Miguel do Guam√°	",
"	Xinguara	",
"	Congonhas	",
"	S√£o Francisco	",
"	S√£o Francisco do Sul	",
"	Porto Ferreira	",
"	Imbituba	",
"	Para√≠so do Tocantins	",
"	Campo Belo	",
"	Santo Est√™v√£o	",
"	Taquaritinga	",
"	√ìbidos	",
"	S√£o Jos√© do Rio Pardo	",
"	Inhumas	",
"	Bu√≠que	",
"	Parob√©	",
"	Pontes e Lacerda	",
"	Caetit√©	",
"	S√£o Miguel dos Campos	",
"	Louveira	",
"	S√£o Gabriel da Cachoeira	",
"	Bom Despacho	",
"	Guapimirim	",
"	Bai√£o	",
"	Xanxer√™	",
"	Ibipor√£	",
"	Tijucas	",
"	Artur Nogueira	",
"	Viana	",
"	Lagoa da Prata	",
"	Morrinhos	",
"	Delmiro Gouveia	",
"	Sap√©	",
"	Trememb√©	",
"	Leopoldina	",
"	Barra	",
"	Brejo Santo	",
"	Guaxup√©	",
"	Tobias Barreto	",
"	Juruti	",
"	Vigia	",
"	Jaru	",
"	Navira√≠	",
"	Vargem Grande Paulista	",
"	Coruripe	",
"	Boa Viagem	",
"	Capivari	",
"	Mairinque	",
"	Itupiranga	",
"	Cangu√ßu	",
"	S√£o Bento do Una	",
"	Prudent√≥polis	",
"	Nova Ven√©cia	",
"	Canela	",
"	Santiago	",
"	Jales	",
"	Tucano	",
"	Brejo da Madre de Deus	",
"	Nova Andradina	",
"	S√£o Joaquim da Barra	",
"	Quirin√≥polis	",
"	Araci	",
"	Po√ß√µes	",
"	Palmas	",
"	Catu	",
"	Bocaiuva	",
"	Barras	",
"	Est√¢ncia Velha	",
"	Campina Grande do Sul	",
"	Monte Santo	",
"	Diamantina	",
"	Monte Carmelo	",
"	Queimadas	",
"	S√£o Benedito	",
"	Monte Alto	",
"	Altos	",
"	Os√≥rio	",
"	S√£o Jos√© de Mipibu	",
"	Sidrol√¢ndia	",
"	Cabre√∫va	",
"	Campos do Jord√£o	",
"	Aquidauana	",
"	Jo√£o Pinheiro	",
"	Guaramirim	",
"	Santa Cruz do Rio Pardo	",
"	Itapaj√©	",
"	S√£o Bento	",
"	Cap√£o Bonito	",
"	Santana do Ipanema	",
"	Seabra	",
"	Timba√∫ba	",
"	Uni√£o	",
"	Casimiro de Abreu	",
"	Timb√≥	",
"	Jaguaquara	",
"	Pai√ßandu	",
"	Campo Novo do Parecis	",
"	Ju√≠na	",
"	Igarap√©	",
"	Campo Maior	",
"	Breu Branco	",
"	Mauriti	",
"	Dracena	",
"	L√°brea	",
"	Barra Velha	",
"	Muan√°	",
"	Araquari	",
"	Jardin√≥polis	",
"	Paraty	",
"	Jaragu√°	",
"	Corn√©lio Proc√≥pio	",
"	Presidente Dutra	",
"	Marau	",
"	S√£o Francisco de Itabapoana	",
"	Maracaju	",
"	Lapa	",
"	Acopiara	",
"	Dois Vizinhos	",
"	Pederneiras	",
"	Santana do Para√≠so	",
"	S√£o Louren√ßo	",
"	Salin√≥polis	",
"	Xique-Xique	",
"	Itabera√≠	",
"	Cerquilho	",
"	Concei√ß√£o do Araguaia	",
"	Mamanguape	",
"	Campo Verde	",
"	Augusto Corr√™a	",
"	Itarar√©	",
"	Lago da Pedra	",
"	Santo Ant√¥nio da Platina	",
"	S√£o Miguel do Oeste	",
"	Porangatu	",
"	Bom Conselho	",
"	Rio Grande da Serra	",
"	Serrana	",
"	Livramento de Nossa Senhora	",
"	Salto de Pirapora	",
"	Uruar√°	",
"	Panambi	",
"	Tarauac√°	",
"	Vargem Grande	",
"	Pedreira	",
"	Itarema	",
"	Santo Ant√¥nio da Patrulha	",
"	Laguna	",
"	Sim√£o Dias	",
"	Mata de S√£o Jo√£o	",
"	Jos√© de Freitas	",
"	Urua√ßu	",
"	Vera Cruz	",
"	Barra de S√£o Francisco	",
"	Santos Dumont	",
"	S√£o Mateus do Sul	",
"	Amontada	",
"	Gar√ßa	",
"	Para√≠ba do Sul	",
"	Guaratuba	",
"	Guaraciaba do Norte	",
"	S√£o Louren√ßo do Sul	",
"	Marata√≠zes	",
"	Maca√∫bas	",
"	Marialva	",
"	Torres	",
"	Coelho Neto	",
"	Santa Maria de Jetib√°	",
"	Autazes	",
"	Santa Helena	",
"	√Åguas Belas	",
"	Barra dos Coqueiros	",
"	Arcos	",
"	Paracambi	",
"	Sena Madureira	",
"	Santo Ant√¥nio de P√°dua	",
"	Currais Novos	",
"	Curu√ß√°	",
"	Mangaratiba	",
"	Nossa Senhora da Gl√≥ria	",
"	Toritama	",
"	Paragua√ßu Paulista	",
"	Pacaj√°	",
"	Ipu	",
"	Esperantina	",
"	S√£o Sebasti√£o do Pass√©	",
"	Parana√≠ba	",
"	S√£o Gotardo	",
"	Z√© Doca	",
"	Ipia√∫	",
"	Itabaianinha	",
"	Santa Rita do Sapuca√≠	",
"	Porto de Moz	",
"	Remanso	",
"	Santa Maria da Boa Vista	",
"	Andradas	",
"	Jacarezinho	",
"	Almenara	",
"	Colinas	",
"	Afogados da Ingazeira	",
"	Pedra Branca	",
"	Santa Quit√©ria	",
"	Salinas	",
"	Gramado	",
"	Vargem Grande do Sul	",
"	Socorro	",
"	Barreiros	",
"	Curitibanos	",
"	Arma√ß√£o dos B√∫zios	",
"	Boa Esperan√ßa	",
"	Itapemirim	",
"	Esp√≠rito Santo do Pinhal	",
"	Capelinha	",
"	Lajedo	",
"	Eldorado do Sul	",
"	Tucum√£	",
"	S√£o Gon√ßalo dos Campos	",
"	Nova Vi√ßosa	",
"	Presidente Epit√°cio	",
"	It√°polis	",
"	Guajar√°-Mirim	",
"	Amambai	",
"	Gua√≠ra	",
"	Oliveira	",
"	Rio Negrinho	",
"	Matinhos	",
"	Visconde do Rio Branco	",
"	Araioses	",
"	V√°rzea Alegre	",
"	Paracuru	",
"	S√£o Fid√©lis	",
"	S√£o Raimundo Nonato	",
"	Brumadinho	",
"	S√£o Mateus do Maranh√£o	",
"	Caet√©	",
"	S√£o Francisco do Conde	",
"	Ouro Branco	",
"	Santa Maria da Vit√≥ria	",
"	Santa Helena de Goi√°s	",
"	Ros√°rio	",
"	Novo Horizonte	",
"	Orl√¢ndia	",
"	Iturama	",
"	S√£o Pedro	",
"	Oeiras	",
"	Sento S√©	",
"	Entre Rios	",
"	Teot√¥nio Vilela	",
"	Mucuri	",
"	Ulian√≥polis	",
"	Pedro II	",
"	Mateus Leme	",
"	Santaluz	",
"	Pentecoste	",
"	Afu√°	",
"	Momba√ßa	",
"	Jacund√°	",
"	Cust√≥dia	",
"	Massap√™	",
"	Machado	",
"	Agudos	",
"	Tiet√™	",
"	Ja√≠ba	",
"	Benjamin Constant	",
"	Bom Jardim	",
"	Jeremoabo	",
"	Matozinhos	",
"	Pontal	",
"	Rio Brilhante	",
"	Sirinha√©m	",
"	Ituverava	",
"	Rio Branco do Sul	",
"	Jarinu	",
"	Atalaia	",
"	Guariba	",
"	Turia√ßu	",
"	Bonito	",
"	Cansan√ß√£o	",
"	Porteirinha	",
"	Santa Cruz	",
"	S√£o Manuel	",
"	S√£o Caetano	",
"	Amarante do Maranh√£o	",
"	Pedreiras	",
"	Santa Rita	",
"	Dom Pedrito	",
"	Campos Novos	",
"	Castelo	",
"	Sarzedo	",
"	Miss√£o Velha	",
"	Assis Chateaubriand	",
"	Ipueiras	",
"	Mandaguari	",
"	Jos√© Bonif√°cio	",
"	Ros√°rio do Sul	",
"	S√£o Jo√£o da Barra	",
"	Barra do Cho√ßa	",
"	Amargosa	",
"	Iper√≥	",
"	Tuntum	",
"	Girau do Ponciano	",
"	Apodi	",
"	Piumhi	",
"	Maragogipe	",
"	Igarap√©-A√ßu	",
"	Rur√≥polis	",
"	Itaqui	",
"	Alian√ßa	",
"	Ipor√°	",
"	Goiatuba	",
"	Prainha	",
"	Boca do Acre	",
"	Feij√≥	",
"	Domingos Martins	",
"	Pilar	",
"	Rio Real	",
"	Pil√£o Arcado	",
"	Concei√ß√£o do Jacu√≠pe	",
"	Baturit√©	",
"	Presidente Venceslau	",
"	Bom Jesus do Itabapoana	",
"	Jaguaria√≠va	",
"	Promiss√£o	",
"	Laranjal do Jari	",
"	Pimenta Bueno	",
"	Confresa	",
"	Ouro Preto do Oeste	",
"	Nanuque	",
"	Charqueadas	",
"	Palotina	",
"	Prado	",
"	Padre Bernardo	",
"	Niquel√¢ndia	",
"	Itamb√©	",
"	Ilhabela	",
"	Posse	",
"	Juara	",
"	S√£o Jos√© do Belmonte	",
"	Santa F√© do Sul	",
"	S√£o Luiz Gonzaga	",
"	Adamantina	",
"	Rio Pardo	",
"	Bodoc√≥	",
"	Bela Vista de Goi√°s	",
"	Itaporanga d'Ajuda	",
"	M√£e do Rio	",
"	S√£o Joaquim de Bicas	",
"	Barra Bonita	",
"	Garibaldi	",
"	Ara√ßua√≠	",
"	Pomerode	",
"	Almeirim	",
"	Nova Cruz	",
"	Colinas do Tocantins	",
"	Serra do Ramalho	",
"	Cura√ß√°	",
"	Petrol√¢ndia	",
"	Brejo	",
"	Port√£o	",
"	S√£o Domingos do Maranh√£o	",
"	Vassouras	",
"	Curralinho	",
"	Iti√∫ba	",
"	Palmeira	",
"	S√£o Lu√≠s de Montes Belos	",
"	Oeiras do Par√°	",
"	Inhambupe	",
"	Bra√ßo do Norte	",
"	V√°rzea da Palma	",
"	Jaguaribe	",
"	Pitangueiras	",
"	Penha	",
"	Novo Progresso	",
"	Morro do Chap√©u	",
"	Pitanga	",
"	Ribeir√£o	",
"	Fraiburgo	",
"	Po√ßo Redondo	",
"	Riach√£o do Jacu√≠pe	",
"	Estreito	",
"	Jo√£o C√¢mara	",
"	Cravinhos	",
"	Capim Grosso	",
"	Palmeira das Miss√µes	",
"	Eirunep√©	",
"	Bom Jardim	",
"	Borba	",
"	Taiobeiras	",
"	Touros	",
"	Am√©rico Brasiliense	",
"	Porto Uni√£o	",
"	S√£o Paulo de Oliven√ßa	",
];

const config = {
  siteUrl: 'https://www.indecent.top',
  generateRobotsTxt: true,
  sitemapSize: 5000,
  outDir: './public',
  changefreq: 'daily',
  priority: 0.7,

  // üîπ Excluir URLs que n√£o devem ser indexadas
  exclude: [
    '/api/*',      // Exclui todas as rotas da API
    '/login',      // Exclui a p√°gina de login
    '/signup',     // Exclui a p√°gina de cadastro
    '/redirect',   // Exclui a p√°gina de redirecionamento
    '/robots',     // Exclui o arquivo robots.txt
    '/sitemap',    // Evita que o pr√≥prio sitemap seja listado no sitemap
  ],

  alternateRefs: [],

  transform: async (config, path) => ({
    loc: path,
    changefreq: config.changefreq,
    priority: config.priority,
    lastmod: new Date().toISOString(),
  }),

  additionalPaths: async (config) => {
    try {
      // üîπ Busca todos os usernames dos usu√°rios cadastrados
      const users = await prisma.user.findMany({
        select: { username: true },
        where: {
          username: { not: null }, // Garante que username n√£o seja nulo
        },
      });

      console.log("Keywords:", keywords);
      const keywordPathsPromises = keywords.map(async (kw) => {
        const path = `/${kw}`;
        return await config.transform(config, path);
      });
      const keywordPaths = await Promise.all(keywordPathsPromises);
      console.log("Generated keyword paths:", keywordPaths);

      console.log(`[SITEMAP] Usu√°rios encontrados: ${users.length}`);

      // üîπ Gera as URLs de perfil e resolve as Promises corretamente
      const userProfilePathsPromises = users
        .filter(user => user.username) // Remove valores nulos/vazios
        .map(async (user) => await config.transform(config, `/perfil/${user.username}`));
      const userProfilePaths = await Promise.all(userProfilePathsPromises);

      console.log(`[SITEMAP] Perfis gerados:`, userProfilePaths);

      // üîπ Busca todas as cidades e pa√≠ses √∫nicos no banco de dados
      const locations = await prisma.post.findMany({
        select: { city: true, country: true },
        distinct: ['city', 'country'],
        where: {
          city: { not: null },
          country: { not: null },
        },
      });

      console.log(`[SITEMAP] Cidades encontradas: ${locations.length}`);

      // üîπ Gera as URLs din√¢micas de acompanhantes e resolve as Promises corretamente
      const locationPathsPromises = locations
        .filter(({ city, country }) => city && country) // Evita valores nulos
        .map(async ({ city, country }) => {
          const slugCity = city.toLowerCase().replace(/\s+/g, '-');
          const slugCountry = country.toLowerCase().replace(/\s+/g, '-');
          return await config.transform(config, `/acompanhantes/${slugCountry}/${slugCity}`);
        });
      const locationPaths = await Promise.all(locationPathsPromises);

      console.log(`[SITEMAP] URLs de acompanhantes geradas:`, locationPaths);

      // üîπ Caminhos fixos adicionais
      const fixedPathsPromises = [
        config.transform(config, '/'),
        config.transform(config, '/compras'),
      ];
      const fixedPaths = await Promise.all(fixedPathsPromises);

      // üîπ Retorna todas as URLs, filtrando valores `undefined`
      return [...fixedPaths, ...locationPaths, ...userProfilePaths, ...keywordPaths].filter(Boolean);
    } catch (error) {
      console.error("Erro ao buscar dados para o sitemap:", error);
      return [];
    } finally {
      await prisma.$disconnect(); // Fecha a conex√£o do Prisma
    }
    // REMOVI ESTA LINHA INACESS√çVEL:
    // return Promise.all([...keywordsPaths, ...staticPaths]);
  },
};

module.exports = config;
*/