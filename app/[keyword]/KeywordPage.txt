// app/[keyword]/page.tsx
"use client";

import Script from "next/script";
import Header from "@/components/Header";
import { useRouter } from "next/navigation";
import { useEffect, useState } from "react";

// Importe seus componentes específicos para cada tipo de projeto
// Exemplo:
// import ReformaClinicaMedica from "@/components/ReformaClinicaMedica";
// import ProjetoClinicaEstetica from "@/components/ProjetoClinicaEstetica";
// import ReformaResidencialGeral from "@/components/ReformaResidencialGeral";

// Array de termos de pesquisa (substitua com seus 50 termos)
const topKeywords = [
  "projeto de clínica médica",
  "reforma de apartamento pequeno",
  "design de interiores clínica estética",
  "arquiteto para reforma residencial",
  // ... seus outros 46 termos
];

// Função para formatar o termo para ser usado como título e conteúdo
const formatKeyword = (keyword: string) => {
  return keyword.charAt(0).toUpperCase() + keyword.slice(1);
};

export default function KeywordPage() {
  const router = useRouter();
  const [keyword, setKeyword] = useState<string | null>(null);

  useEffect(() => {
    const path = router.pathname; // Correção: Acessa router.pathname
    const parts = path.split('/');
    const dynamicSegment = parts[1]; // O segmento dinâmico é o primeiro após a barra inicial
    setKeyword(dynamicSegment?.replace(/-/g, ' ') || null);
  }, [router.pathname]);

  if (!keyword) {
    return <div>Carregando...</div>;
  }

  const formattedKeyword = formatKeyword(keyword);

  // Lógica para renderizar componentes diferentes com base no keyword
  let content;
  if (keyword.includes("clínica médica")) {
    // content = <ReformaClinicaMedica keyword={keyword} />;
    content = <p>Conteúdo sobre {formattedKeyword} (Clínica Médica)</p>;
  } else if (keyword.includes("clínica de estética")) {
    // content = <ProjetoClinicaEstetica keyword={keyword} />;
    content = <p>Conteúdo sobre {formattedKeyword} (Clínica de Estética)</p>;
  } else if (keyword.includes("reforma residencial") || keyword.includes("reforma de apartamento") || keyword.includes("reforma de casa")) {
    // content = <ReformaResidencialGeral keyword={keyword} />;
    content = <p>Conteúdo sobre {formattedKeyword} (Reforma Residencial)</p>;
  } else if (keyword.includes("arquitetura")) {
    content = <p>Conteúdo sobre {formattedKeyword} (Arquitetura Geral)</p>;
  } else {
    content = <p>Conteúdo genérico sobre {formattedKeyword}</p>;
  }

  return (
    <div className="overflow-hidden w-full bg-gray-100">
      {/* Google Analytics */}
      <Script
        strategy="afterInteractive"
        src="https://www.googletagmanager.com/gtag/js?id=G-X14YM769KT"
      />
      <Script
        id="google-analytics"
        strategy="afterInteractive"
        dangerouslySetInnerHTML={{
          __html: `
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-X14YM769KT');
          `,
        }}
      />

      {/* JSON-LD: LocalBusiness (adapte conforme a página) */}
      <Script
        id="structured-data"
        type="application/ld+json"
        strategy="beforeInteractive"
        dangerouslySetInnerHTML={{
          __html: JSON.stringify({
            "@context": "https://schema.org",
            "@type": "LocalBusiness",
            name: "Camila Chalon Arquitetura",
            url: `https://www.camilachalon.com.br/${keyword?.replace(/ /g, '-')}`,
            logo: "https://www.camilachalon.com.br/logo.png",
            description: `Projetos de arquitetura e reformas de ${formattedKeyword} em Porto Alegre e região.`,
            address: {
              "@type": "PostalAddress",
              streetAddress: "Av. Assis Brasil, 3535/411",
              addressLocality: "Porto Alegre",
              addressRegion: "RS",
              postalCode: "91010-007",
              addressCountry: "BR",
            },
            author: {
              "@type": "Person",
              name: "Camila Chalon",
            },
            datePublished: "2025-04-21", // Adapte a data
          }),
        }}
      />

      <Header />
      <main className="pt-16">
        <div className="container mx-auto py-8 px-4">
          <h1 className="text-3xl font-bold mb-4">{formattedKeyword} em Porto Alegre</h1>
          {content}
          {/* Adicione aqui o conteúdo específico para cada termo */}
          {/* Você pode usar componentes diferentes com base no keyword */}
        </div>
      </main>
    </div>
  );
}

export async function generateStaticParams() {
  return topKeywords.map((keyword) => ({
    keyword: keyword.replace(/ /g, '-'),
  }));
}